<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
	<title>文件上传进度条</title>
	<link	rel="stylesheet"	  href="/css/bootstrap.min.css" />
	<script type="text/javascript" src="/js/jquery.min.js"></script>
	<script type="text/javascript" src="/js/bootstrap.min.js"></script>
</head>
<body>
	<input type="file" id="fileBtn" >
	<div style="width:260px;">
		<div class="progress" >
			  <div 	class="progress-bar progress-bar-success progress-bar-striped" 
			  		role="progressbar" 
			  		aria-valuenow="0" 
			  		aria-valuemin="0" 
			  		aria-valuemax="100" 
			  		style="width: 0%">
			    	<span class="sr-only">40% Complete (success)</span>
			  </div>
		</div>
	</div>
	<button type="button" class="btn btn-success" id="subBtn">点击上传文件</button>
	<script type="text/javascript">
		$("#subBtn").click(function(){
			var formData = new FormData();  
			formData.append("file",$("#fileBtn")[0].files[0]);
			$.ajax({
				url:"/upload",
				type:"post",
				data:formData,
				contentType: false,//必须false才会自动加上正确的Content-Type
            	processData: false,
            	xhr:function(){
            		myXhr = $.ajaxSettings.xhr();
            		if(myXhr.upload){ //检查upload属性是否存在  
                        //绑定progress事件的回调函数  
                        myXhr.upload.addEventListener('progress',function(e){
                        	var curr=e.loaded;
                			var total=e.total;
                			process=curr/total*100;
                			console.log(process);
                			$(".progress-bar").css("width",process+"%");
                        }, false);   
                    }  
            		return myXhr; 
            	},
            	success:function(data){
            		console.log(data);
            	}
			});
		});
	</script>
</body>
</html>